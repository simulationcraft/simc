# Jom - Discipline - 2023-03-01 16:08 - US/Spinebreaker
# SimC Addon 10.0.5-01
# WoW 10.0.5.48317, TOC 100005
# Requires SimulationCraft 1000-01 or newer
html="jom.html"
priest="Jom"
source=default
spec=holy
level=70
race=blood_elf
role=spell
position=ranged_back
talents=BEQAAAAAAAAAAAAAAAAAAAAAAQDAAAAAAAQJhSIJRSIQSiokkAAAAAIBgSCJShIJJRQRaJJJEA
calculate_scale_factors=1
scale_only=intellect,crit,mastery,vers,haste
iterations=100000
fight_style=DungeonSlice


head=,id=200327,gem_id=192945,bonus_id=6652/7935/8828/9130/7977/1495/8767
neck=,id=193001,gem_id=192945/192945/192984,bonus_id=8836/8840/8902/8960/8784/8782/8802/8790/8846,crafted_stats=40/36
shoulder=,id=200329,bonus_id=6652/8826/7977/8973/1489/8767
back=,id=193511,enchant_id=6598,bonus_id=8836/8840/8902/8802/8846/8790/8932/8960,crafted_stats=36/32
chest=,id=200324,enchant_id=6619,bonus_id=6652/7977/8974/8830/1495
wrist=,id=134310,enchant_id=6580,gem_id=192945,bonus_id=7977/6652/7935/8822/8819/9144/8973/3294/8767
hands=,id=193713,bonus_id=7977/6652/8822/8817/9144/8973/1637/8767
waist=,id=137488,bonus_id=7977/6652/7936/8822/8818/9144/8973/3294/8767
legs=,id=200328,enchant_id=6544,bonus_id=6652/7977/8827/8973/1498/8767
feet=,id=134308,enchant_id=6613,bonus_id=9130/7977/6652/8822/8818/9144/3300/8767
finger1=,id=192999,enchant_id=6556,gem_id=192945,bonus_id=8836/8840/8902/8780/8802/8790/8846,crafted_stats=49/36
finger2=,id=195526,enchant_id=6556,bonus_id=6652/7937/7980/1485/8767
trinket1=,id=110007,bonus_id=7977/6652/9144/8973/3300/8767
trinket2=,id=193677,bonus_id=7977/6652/9144/8973/1637/8767
main_hand=,id=193699,enchant_id=6643,bonus_id=9130/7977/6652/9147/1643/8767

profileset."Image,Miracle | All DPS talents"+="talents=BEQAAAAAAAAAAAAAAAAAAAAAAQBAAAAAAAQJhSIJRSIQSiokkAAAAAIBgSCJShIJJRQRaJJJEA"
profileset."Image,Miracle | No Apotheosis"+="talents=BEQAAAAAAAAAAAAAAAAAAAAAAQBAAAAAAAQJhWIJRSIQSiokkAAAAAIBgSCJShIJJRQRaJJJEA"
profileset."Image,Miracle | No Naaru"+="talents=BEQAAAAAAAAAAAAAAAAAAAAAAQBAAAAAAAQJRKhkEJhASiokkAAAAAIBgSCJShIJJRQRaJJJEA"
profileset."Image,Miracle | No Harmonius"+="talents=BEQAAAAAAAAAAAAAAAAAAAAAAQBAAAAAAAQJRKIJRSIQSiokkAAAAAIBgSCJShIJJRQRaJJJEA"
profileset."No Image, No Word"+="talents=BEQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQRJRKKSSkECIJiSSCAAAAgEAKJkIFikkEBFplkkQA"
profileset."Image,Miracle | No BurningVehemence"+="talents=BEQAAAAAAAAAAAAAAAAAAAAAAQBAAAAAAAQRiSIJRSIQSiokkAAAAAIBgSCJShIJJRQRaJJJEA"
profileset."Image,Miracle | No BurningVehemence"+="talents=BEQAAAAAAAAAAAAAAAAAAAAAAQBAAAAAAAQRiSIJRSIQSiokkAAAAAIBgSCJShIJJRQRaJJJEA"
profileset."Image,Miracle | No SearingLight"+="talents=BEQAAAAAAAAAAAAAAAAAAAAAAQBAAAAAAAQhoESSkECkkIpkkAAAAAIBgSCJShIJJRQRaJJJEA"
profileset."Image,Miracle | No SearingLight, No Empyreal"+="talents=BEQAAAAAAAAAAAAAAAAAAAAAAQBAAAAAAAQhoESSkECkkUSKJBAAAAgEAKJkIFikkEBFplkkQA"
profileset."Image,Miracle | No Chastise, No SearingLight, No Empyreal"+="talents=BEQAAAAAAAAAAAAAAAAAAAAAAQBAAAAAAAQhoESSiECkkUSKJUAAAAASAokQiUISSSEUkWSSCBA"
profileset."Image,Miracle | All DPS talents, no Mindgames"+="talents=BEQAAAAAAAAAAAAAAAAAAAAAAQBAAAAAAAgEHoESSkECkkIKJJAAAAAAgSCiUISSSEUkWSSCBA"
profileset."Image,Miracle | All DPS talents, no Rhapsody"+="talents=BEQAAAAAAAAAAAAAAAAAAAAAAQBAAAAAAAgEHoESSkECkkIKJJAAAAASAokQiUISSEBFplkkQA"
profileset."Image-only | All DPS talents"+="talents=BEQAAAAAAAAAAAAAAAAAAAAAAQBAAAAAAAgEHoESSkECkkIKJJAAAAASAokQiUISSSEUkWSSCBA"
profileset."Word | All DPS talents"+="talents=BEQAAAAAAAAAAAAAAAAAAAAAAQDAAAAAAAQJhSIJRSIQSiokkAAAAAIBgSCJShIJJRQRaJJJEA"
profileset."Word | No Naaru"+="talents=BEQAAAAAAAAAAAAAAAAAAAAAAQDAAAAAAAQJkSIJRSIgkUSKJBAAAAgEAKJkIFikkEBFplkkQA"
profileset."Word | No Harmonius"+="talents=BEQAAAAAAAAAAAAAAAAAAAAAAQDAAAAAAAQJkCSSkECkkUSKJBAAAAgEAKJkIFikkEBFplkkQA"
profileset."Word | No Apotheosis"+="talents=BEQAAAAAAAAAAAAAAAAAAAAAAQDAAAAAAAQJkGSSkECkkUSKJBAAAAgEAKJkIFikkEBFplkkQA"
profileset."Word | No BurningVehemence"+="talents=BEQAAAAAAAAAAAAAAAAAAAAAAQDAAAAAAAQRiSIJRSIQSiokkAAAAAIBgSCJShIJJRQRaJJJEA"
profileset."Word | No SearingLight"+="talents=BEQAAAAAAAAAAAAAAAAAAAAAAQDAAAAAAAQJoESSkECkkIpkkAAAAAIBgSCJShIJJRQRaJJJEA"
profileset."Word | No EmpyrealBlaze"+="talents=BEQAAAAAAAAAAAAAAAAAAAAAAQDAAAAAAAQJoESSkECkkUSKJBAAAAgEAKJkIFikkEBFplkkQA"
profileset."FAQ recommendation"+="talents=BEQAAAAAAAAAAAAAAAAAAAAAAQRAAAAAAAAFiWIJhESJkkUokElAAAAAQSahSSCShQSQQphkIkCA"



# Overrides
potion=elemental_potion_of_ultimate_power_3
flask=phial_of_tepid_versatility_3
food=fated_fortune_cookie
augmentation=draconic_augment_rune
temporary_enchant=main_hand:howling_rune_3

# Executed before combat begins. Accepts non-harmful actions only.
actions.precombat=flask
actions.precombat+=/food
actions.precombat+=/augmentation
# Snapshot raid buffed stats before combat begins and pre-potting is done.
actions.precombat+=/snapshot_stats

# RUN ACTIONS
actions+=/run_action_list,name=main

# VARIABLES
actions.main_variables+=/variable,name=time_until_divine_favor,op=set,value=cooldown.divine_word.remains+action.divine_word.execute_time+action.holy_word_chastise.execute_time+action.empyreal_blaze.execute_time+action.apotheosis.execute_time+(4*action.holy_fire.execute_time)
# 31.5% base spell power * (rhapsody stacks * rhapsody multiplier) * number of targets
actions.main_variables+=/variable,name=holy_nova_damage,op=set,value=0.315*action.holy_nova.spell_targets*(1+(buff.rhapsody.stack*0.1))
actions.main_variables+=/variable,name=filler_smite_estimate,op=set,value=action.smite.execute_time*10

# MAIN
actions.main+=/call_action_list,name=main_variables

# Keep dots up
actions.main+=/holy_fire,if=refreshable|!ticking
actions.main+=/shadow_word_pain,if=refreshable|!ticking&(!talent.apotheosis.enabled|(talent.apotheosis.enabled&buff.apotheosis.down))

# Divine Word only if we can sync with Chastise. If we have Empyreal Blaze, sync with that as well.
actions.main+=/divine_word,if=talent.divine_word.enabled&(talent.holy_word_chastise.enabled&cooldown.holy_word_chastise.up)&((talent.empyreal_blaze.enabled&cooldown.empyreal_blaze.up)|!talent.empyreal_blaze.enabled)
# Only holy word chastise early if we're triggering divine favor: chastise
actions.main+=/holy_word_chastise,if=buff.divine_word.up

# Enter Divine Favor Active rotation with divine favor: chastise buff up
actions.main+=/run_action_list,name=divine_favor_active,if=buff.divine_favor_chastise.up
# Run divine favor fillers rotation with buff down
actions.main+=/run_action_list,name=divine_favor_filler,if=talent.divine_word.enabled&talent.holy_word_chastise.enabled&buff.divine_favor_chastise.down
# Run divine image rotation with divine image
actions.main+=/run_action_list,name=divine_image,if=talent.divine_image.enabled
# Otherwise generic rotation
actions.main+=/run_action_list,name=generic,if=!talent.divine_image.enabled&!talent.divine_word.enabled

# DIVINE FAVOR ACTIVE
actions.divine_favor_active+=/call_action_list,name=cooldowns
actions.divine_favor_active+=/apotheosis,if=talent.apotheosis.enabled
actions.divine_favor_active+=/empyreal_blaze,if=talent.empyreal_blaze.enabled
actions.divine_favor_active+=/holy_fire,if=buff.empyreal_blaze.up|refreshable|!ticking
actions.divine_favor_active+=/shadow_word_pain,if=refreshable|!ticking
actions.divine_favor_active+=/shadow_word_death,if=target.health.pct<20
actions.divine_favor_active+=/holy_nova,if=talent.rhapsody.enabled&buff.rhapsody.stack=buff.rhapsody.max_stack
actions.divine_favor_active+=/mindgames,if=talent.mindgames.enabled
actions.divine_favor_active+=/holy_word_chastise,if=talent.holy_word_chastise.enabled
actions.divine_favor_active+=/shadow_word_death,if=target.health.pct<50
# Only does more damage than smite + holy_fire proc if > 1 targets
actions.divine_favor_active+=/divine_star,if=talent.divine_star.enabled&spell_targets.divine_star>=2
# Only does more damage than smite + holy_fire proc if > 1 targets
actions.divine_favor_active+=/halo,if=talent.halo.enabled&spell_targets.halo>=2
actions.divine_favor_active+=/smite

# DIVINE FAVOR FILLER
actions.divine_favor_filler+=/holy_fire,if=refreshable|!ticking
actions.divine_favor_filler+=/shadow_word_pain,if=refreshable|!ticking
actions.divine_favor_filler+=/shadow_word_death,if=target.health.pct<20&variable.time_until_divine_favor>cooldown
actions.divine_favor_filler+=/holy_nova,if=talent.rhapsody.enabled&buff.rhapsody.stack=buff.rhapsody.max_stack&(buff.rhapsody.max_stack*2>variable.time_until_divine_favor)
actions.divine_favor_filler+=/mindgames,if=variable.time_until_divine_favor>cooldown
actions.divine_favor_filler+=/holy_word_chastise,if=variable.time_until_divine_favor>cooldown
actions.divine_favor_filler+=/shadow_word_death,if=target.health.pct<50&variable.time_until_divine_favor>cooldown
actions.divine_favor_filler+=/divine_star,if=talent.divine_star.enabled&variable.time_until_divine_favor>cooldown
actions.divine_favor_filler+=/halo,if=talent.halo.enabled&variable.time_until_divine_favor>cooldown
actions.divine_favor_filler+=/smite


# DIVINE IMAGE
actions.divine_image+=/holy_word_sanctify,if=talent.holy_word_sanctify.enabled
actions.divine_image+=/holy_word_serenity,if=talent.holy_word_serenity.enabled
actions.divine_image+=/call_action_list,name=cooldowns,if=(!talent.apotheosis.enabled|(talent.apotheosis.enabled&cooldown.apotheosis.up))
actions.divine_image+=/holy_word_chastise,if=talent.holy_word_chastise.enabled
actions.divine_image+=/apotheosis,if=talent.apotheosis.enabled
actions.divine_image+=/empyreal_blaze,if=talent.empyreal_blaze.enabled
actions.divine_image+=/holy_fire,if=buff.empyreal_blaze.up|refreshable|!ticking
actions.divine_image+=/shadow_word_pain,if=refreshable|!ticking
actions.divine_image+=/shadow_word_death,if=target.health.pct<20
actions.divine_image+=/mindgames,if=talent.mindgames.enabled
actions.divine_image+=/holy_nova,if=talent.rhapsody.enabled&buff.rhapsody.stack=buff.rhapsody.max_stack
actions.divine_image+=/shadow_word_death,if=target.health.pct<50
actions.divine_image+=/divine_star,if=talent.divine_star.enabled
actions.divine_image+=/halo,if=talent.halo.enabled
actions.divine_image+=/smite

# GENERIC
actions.generic+=/call_action_list,name=cooldowns,if=(!talent.apotheosis.enabled|(talent.apotheosis.enabled&cooldown.apotheosis.up))
actions.generic+=/holy_word_chastise,if=talent.holy_word_chastise.enabled
actions.generic+=/apotheosis,if=talent.apotheosis.enabled
actions.generic+=/empyreal_blaze,if=talent.empyreal_blaze.enabled
actions.generic+=/holy_fire,if=buff.empyreal_blaze.up|refreshable|!ticking
actions.generic+=/shadow_word_pain,if=refreshable|!ticking
actions.generic+=/shadow_word_death,if=target.health.pct<20
actions.generic+=/mindgames,if=talent.mindgames.enabled
actions.generic+=/holy_nova,if=talent.rhapsody.enabled&buff.rhapsody.stack=buff.rhapsody.max_stack
actions.generic+=/shadow_word_death,if=target.health.pct<50
actions.generic+=/divine_star,if=talent.divine_star.enabled
actions.generic+=/halo,if=talent.halo.enabled
actions.generic+=/smite

# Cooldowns
# hold PI up to 30 seconds to sync with divine word
actions.cooldowns+=/power_infusion
# Only potion in sync with power infusion
actions.cooldowns+=/potion,if=buff.power_infusion.up
# hold trinkets to use with PI
actions.cooldowns+=/use_items,if=buff.power_infusion.up|cooldown.power_infusion.remains>=cooldown
actions.cooldowns+=/shadowfiend
# Use Desperate Prayer to heal when very low health
# actions.cds+=/desperate_prayer,if=health.pct<=35
#symbol of hope when low mana
# actions.cds+=/symbol_of_hope,if=mana.pct<=50